<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Тест и мини-игра с поздравлением</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: #d63384;
    overflow: hidden;
    background: transparent;
  }

  #bgVideo {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    object-fit: cover;
    z-index: -1;
  }

  body {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
  }

  #container {
    max-width: 700px;
    width: 100%;
  }

  .frame {
    background: rgba(255 240 245 / 0.8);
    border: 3px solid #ffadd8;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(255,182,193,0.4);
    padding: 30px 40px;
    box-sizing: border-box;
    text-align: center;
    user-select: none;
  }

  #startButton {
    padding: 16px 32px;
    font-size: 22px;
    background-color: #d63333;
    color: white;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(214, 51, 51, 0.7);
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #startButton:hover {
    background-color: #a22222;
  }

  .question {
    font-size: 22px;
    margin-bottom: 15px;
    user-select: none;
  }
  .options {
    display: flex;
    flex-direction: column;
    gap: 12px; /* Добавлен отступ между кнопками */
    margin-bottom: 25px;
  }
  button.optionBtn {
    padding: 12px;
    font-size: 18px;
    background-color: #ff8fcf;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(255, 105, 180, 0.4);
    transition: background-color 0.3s ease;
    user-select: none;
  }
  button.optionBtn:hover {
    background-color: #ff6eb4;
  }

  #gameBlock {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
  }
  .tile {
    width: 70px;
    height: 70px;
    background: #ff8fcf;
    border-radius: 12px;
    color: white;
    font-size: 28px;
    line-height: 70px;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 4px 10px rgba(255, 105, 180, 0.4);
    transition: background-color 0.3s ease;
  }
  .tile.correct {
    background: #ff6eb4;
    box-shadow: 0 0 20px #ff6eb4;
    cursor: default;
  }
  .tile:hover:not(.correct) {
    background-color: #ff6eb4;
  }

  #congratsMessage {
    display: none;
    color: #d63384;
    font-size: 36px; /* Сделал больше */
    font-weight: bold;
    margin-top: 20px;
    user-select: none;
    opacity: 0;
    transition: opacity 0.5s ease;
    text-align: center; /* По центру */
  }

  #finalMessage {
    display: none;
    opacity: 0;
    transform: scale(0.95);
    animation: fadeScaleIn 3s ease forwards;
    text-align: left;
    font-size: 18px;
    line-height: 1.5;
  }

  #noText {
    display: none;
    color: red;
    font-size: 72px;
    font-weight: bold;
    user-select: none;
    text-align: center;
  }

  @keyframes fadeScaleIn {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>
</head>
<body>

<video id="bgVideo" autoplay muted loop playsinline>
  <source src="https://cdn.pixabay.com/video/2024/04/25/209517_large.mp4" type="video/mp4" />
  Ваш браузер не поддерживает видео.
</video>

<div id="container">

  <div id="startArea" class="frame" role="region" aria-label="Начало опроса">
    <button id="startButton" type="button">Начало конца</button>
  </div>

  <div id="quiz" class="frame" role="main" aria-live="polite" style="display:none;">
    <div id="headerText" style="font-size:32px; margin-bottom:20px; user-select:none;">Мини-тест</div>
    <div id="questionContainer"></div>
  </div>

  <div id="noText" aria-live="assertive" aria-atomic="true">НЕТ</div>

  <div id="gameBlock" class="frame" style="display:none;" aria-label="собери числа в правильном порядке" role="main" tabindex="0" aria-live="polite">
  </div>

  <div id="congratsMessage" role="alert" aria-live="assertive"></div>

  <div id="finalMessage" class="frame" role="alert" aria-live="polite" tabindex="0">
    <div><strong>Сегодня лучший день в твоей жизни</strong></div>
    <br>
    Вот и настал тот день, когда ты стала ещё взрослее.<br>
    Этот день должен запомнится для тебя, как самый счастливый день за прошедший год. Родная моя, маленькая кицуня, сколько бы у нас не было разногласий и обид, я все так же очень сильно тебя люблю.<br>
    Ты остаешься тем самым огоньком во тьме, который греет в нужный момент, осветит путь, подскажет как быть.<br>
    Ты та, о которой я мечтал... Умная, красивая, добрая, милая, обаятельная.... Не могу подобрать слов, чтобы описать какая ты хорошая.<br>
    Помогла во многих трудных моментах, всегда поддерживаешь меня, за что я очень благодарен.<br>
    Ты стала частью моей семьи, стала той, которой я доверяю как родному человеку, подпустил настолько близко, что я рассказываю все тебе, не боясь что ты можешь это рассказать кому-то другому. Делюсь с тобой своими болями и тревогами.<br>
    Ты — та, идеал той, к которому я стремился.<br>
    Ты моя самая замечательная девочка и это твой день — только твой! &lt;3
  </div>

</div>

<script>
  const quizData = [
    { question: "Как меня зовут?", options: ["Никита", "без понятия кто ты"], correctIndex: 0 },
    { question: "Сколько тебе Исполнилось?", options: ["16", "я ребенок"], correctIndex: 0 },
    { question: "Ты меня любишь?", options: ["Да", "Наверно"], correctIndex: 0 }
  ];

  const startButton = document.getElementById('startButton');
  const startArea = document.getElementById('startArea');
  const quiz = document.getElementById('quiz');
  const questionContainer = document.getElementById('questionContainer');
  const noText = document.getElementById('noText');
  const gameBlock = document.getElementById('gameBlock');
  const congratsMessage = document.getElementById('congratsMessage');
  const finalMessage = document.getElementById('finalMessage');

  // Тексты кнопок, которые будут сменяться
  const buttonTexts = [
    "Начало конца",
    "Точно хочешь?",
    "А может не стоит?",
    "Там нет ничего",
    "Поверь мне",
    "ТАМ ТОЧНО НИЧЕГО НЕТУ",
    "ДА НЕТУ ТАМ НИЧЕГО",
    "ТАМ ПУСТО",
    "И зачем ты листаешь дальше?",
    "Но там же пусто...",
    "Раз решилась, нажимай"
  ];

  let currentButtonIndex = 0;

  startButton.addEventListener('click', () => {
    currentButtonIndex++;
    if (currentButtonIndex < buttonTexts.length) {
      // Меняем текст кнопки на следующий
      startButton.textContent = buttonTexts[currentButtonIndex];
    } else {
      // Скрываем кнопку и показываем тест
      startArea.style.display = 'none';
      quiz.style.display = 'block';
      showQuestion(0);
    }
  });

  let currentQuestionIndex = 0;

  function showQuestion(index) {
    const q = quizData[index];
    questionContainer.innerHTML = `
      <div class="question">${q.question}</div>
      <div class="options">
        ${q.options.map((opt, i) => `<button class="optionBtn" data-index="${i}">${i + 1}) ${opt}</button>`).join('')}
      </div>
    `;

    const optionButtons = questionContainer.querySelectorAll('.optionBtn');
    optionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const selectedIndex = Number(btn.getAttribute('data-index'));
        if(selectedIndex === q.correctIndex) {
          currentQuestionIndex++;
          if(currentQuestionIndex < quizData.length) {
            showQuestion(currentQuestionIndex);
          } else {
            quiz.style.display = 'none';
            startGame();
          }
        } else {
          showNo();
        }
      });
    });
  }

  function showNo() {
    noText.style.display = 'block';
    setTimeout(() => noText.style.display = 'none', 1500);
  }

  let currentNumber = 1;

  function startGame() {
    gameBlock.style.display = 'flex';
    congratsMessage.style.display = 'none';
    finalMessage.style.display = 'none';
    initGame();
  }

  function initGame() {
    gameBlock.innerHTML = '';
    currentNumber = 1;

    const numbers = Array.from({length: 16}, (_, i) => i + 1);
    for(let i = numbers.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
    }

    numbers.forEach(num => {
      const tile = document.createElement('div');
      tile.classList.add('tile');
      tile.textContent = num;
      tile.tabIndex = 0;
      tile.setAttribute('role', 'button');
      tile.setAttribute('aria-label', `Число ${num}`);
      tile.addEventListener('click', () => tileClicked(num, tile));
      tile.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          tileClicked(num, tile);
        }
      });
      gameBlock.appendChild(tile);
    });
  }

  function tileClicked(num, tile) {
    if(num === currentNumber) {
      tile.classList.add('correct');
      currentNumber++;
      if(currentNumber > 16) {
        gameBlock.style.display = 'none';
        showCongratsMessage();
      }
    } else {
      showNo();
    }
  }

  function showCongratsMessage() {
    congratsMessage.textContent = 'Такой долгий путь ты прошла';
    congratsMessage.style.opacity = '1';
    congratsMessage.style.display = 'block';

    setTimeout(() => {
      congratsMessage.style.opacity = '0';
      setTimeout(() => {
        congratsMessage.style.display = 'none';
        showFinalMessage();
      }, 500);
    }, 1500);
  }

  function showFinalMessage() {
    finalMessage.style.display = 'block';
    finalMessage.focus();
  }
</script>

</body>
</html>
